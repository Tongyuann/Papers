# Brainstorm Optimization Algorithm with K-means Clustering for Disassembly Line Balancing Problems
## ***摘要***
#### 拆卸线种类：直线拆卸线
#### 算法：Brainstorming Optimization (BO) algorithm、K-means clustering algorithm
将改进的K-means聚类算法与BO算法相结合，在每个聚类中寻找局部最优解，然后通过比较局部最优解，得到全局最优解。**用1减去每两个个体之间的相似度作为个体之间的距离，改进交叉算子以保持种群的多样性，并使用变异算子使目标向最优解进化**
#### 验证方法：Artificial Bee Colony algorithm and、Wolf Optimization algorithm
## ***简介***
由于U型拆卸线和双边拆卸线对人工和机器人的要求较高，在实际使用中目前工厂采用直线拆卸线为主流
#### 头脑风暴算法
BO算法是由Shi在2011年提出的。它集思广益，使不同领域的人们对同一问题有不同的看法，并朝着最优的视角方向进化，在解决任务调度问题方面取得了巨大的成功。
#### 贡献
1. 首次建立了DLBP数学模型
2. 将改进的K-means聚类算法与BO算法相结合
## ***问题解决方案***
#### DLBP目标：优化拆卸生产线上工作站的拆卸任务分配
![](https://pic.imgdb.cn/item/66a06e1ad9c307b7e9d7cb13.png)
*Petri网由place、transition和connection（连place和transition的弧）组成。place是被动元素，可以包含记号。token是系统资源数量，token在地方的分发构成了网的标记。transition是活动组件并对活动或事件或动作进行建模。如果启用了transition，则可以触发这些转换。当transition触发时，它从其输入位置移除token，并将token添加到其输出位置*  
  
#### 建立DLBP模型，假设
1. 每个工作站都有一系列拆卸工位。
2. 一个拆卸任务只能分配给一个工作站的一个拆卸工位。
3. 至少将一个反汇编任务分配给打开的工作站。
4. 不同工作站之间的切换时间较短，可以忽略不计。
5. 任务之间的切换时间是已知的。
6. 拆卸任务之间存在优先约束关系。
$$  
\max f = p -C_j-Z_{w,k}-C_w
$$
$$
Z_{w,k}\geq S_{j,j^{'},w}(x_{j,w,k-1}+x_{j{'}，w,k}-1)
$$
*j 代表拆卸任务，w 代表工作站数量，k 代表工作站中拆卸站的数量，P 代表拆卸产品得到的部件价值，$C_j$代表拆卸任务j消耗的成本，$C_w$表示打开工作站w所消耗的成本，$Z_{w,k}$代表同一工作站相邻任务切换的成本*  
*$S_{j,j^{'},w}$代表在w工作站上切换 j 和 j' 的时间，$x_{j,w,k-1}$代表任务 j 在 w 工作站的 k-1 位置上执行，当任务执行时 x=1 ，否则 x=0*  
#### 各部件回收价值

| 部件索引号 | 回收价值 | 部件索引号 | 回收价值 |  
| :-: | :-: | :-: | :-: |  
| 1 | 253 | 9 | 79 |
| 2 | 12 |  10| 179 |
| 3 | 241 | 11 | 13 |
| 4 | 228 | 12 | 100 |
| 5 | 128 | 13 | 50 |
| 6 | 192 | 14 | 50 |
| 7 | 115 | 15 | 66 |
| 8 | 49 |  |  |
#### 相邻任务间切换成本

| 邻近任务 | 切换代价 | 临近任务 | 切换代价 |  
| :-: | :-: | :-: | :-: | 
| 1-2 | 13 | 4-9 | 5 |
| 1-3 | 11 | 5-10 | 15 |
| 1-4 | 12 | 5-11 | 12 |
| 2-5 | 9 | 6-11 | 15 |
| 3-6 | 15 | 8-12 | 13 |
| 3-7 | 6 | 9-13 | 6 |
| 4-8 | 11 |  |  |
#### 产品拆卸成本

| 任务索引 | 拆卸成本 | 任务索引 | 拆卸成本 |  
| :-: | :-: | :-: | :-: | 
| 1 | 21 | 8 | 15 |
| 2 | 22 | 9 | 32 |
| 3 | 16 | 10 | 32 |
| 4 | 23 | 11 | 12 |
| 5 | 19 | 12 | 15 |
| 6 | 26 | 13 | 24 |
| 7 | 24 |  |  |
## ***算法***
#### 编码和解码
![](https://pic.imgdb.cn/item/66a08103d9c307b7e9ea71b7.png)  
**$b^1$是任务拆卸顺序，$b^2$是代表任务是否在执行的二进制向量**  
第一阶段采用蒙特卡罗随机模拟方法得到拆卸序列B，然后根据PN提供的优先级矩阵，调整拆卸顺序，使之与实际情况和顺序相匹配，得到$b^{'}$,在这种情况下，编码可以包含一个以上的拆卸序列。在第二阶段，从PN提供的冲突关系集中选择一个序列$b^{''}$
#### 搜索过程
IBO包括初始化种群、K-均值聚类、新个体生成和选择过程。  
**初始化种群**  ：利用蒙特卡罗随机模拟生成拆卸序列，然后根据优先关系集和冲突关系集调整拆卸序列为合理的拆卸序列  
**K-均值聚类**：计算个体之间的相似度，然后用1减去相似度来计算两个个体之间的距离
**新个体生成**：通过改变拆卸序列和改进的交叉和变异操作来产生新的个体  
**选择过程**：首先从每个簇中选择局部最优解，然后通过比较每个簇的局部最优解来获得全局最优解
#### 交叉变异操作
在生成新个体阶段，模仿自然界生物遗传的特点，选择两点交叉的方式，以区间的方式进行部分基因交换，以保持种群的多样性  
**两点交叉的过程**  
1. 在两个成对个体的编码串中随机选择两个交叉点
2. 两个交换的个体之间的染色体的一部分是选择的交叉点  
![](https://pic.imgdb.cn/item/66a088ccd9c307b7e9f0fe2a.png)
#### 实验结果
**运行环境和测试案例研究**
| 案例序号 | 实例 | 任务数量 |
| :-: | :-: | :-: | 
| 1 | 洗衣机 | 13 |
| 2 | 圆珠笔 | 20 |
| 3 | 收音机 | 30 |
| 4 | 冲击钻 | 46 |

结果表明，IBO算法在大多数情况下优于ABC算法和GWO算法，特别是在较大的情况下，求解速度与接近最优解的差距更为明显